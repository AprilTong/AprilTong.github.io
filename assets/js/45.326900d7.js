(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{455:function(t,s,a){"use strict";a.r(s);var n=a(2),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"写在前面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写在前面"}},[t._v("#")]),t._v(" 写在前面")]),t._v(" "),s("p",[t._v("本文内容是根据"),s("a",{attrs:{href:"https://frontendmasters.com/blog/how-to-make-a-css-timer/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to Make a CSS Timer"),s("OutboundLink")],1),t._v("翻译而来，感谢作者"),s("a",{attrs:{href:"https://frontendmasters.com/blog/author/preethisam/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PREETHI SAM"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),s("p",[t._v("在网站上，有时我们需要使用计时器。")]),t._v(" "),s("p",[t._v("或许我们希望为一场测验计时，或是在调查中增加压力。也许我们只是想在用户完成了某些了不起的事情（如成功预订音乐会门票）后，制造一种戏剧性的倒计时效果。我们可能在尝试构建一个微型时间管理工具（想想番茄工作法）。或者，这仅仅是一个替代旋转器用户界面的方法。")]),t._v(" "),s("p",[t._v("当这些情况出现时，我毫不犹豫地会使用 JavaScript，这通常是一种更强大的工具。然而，当最简单的选择是最佳选择时，CSS 替代品同样有趣且高效。如今，一些电子邮件客户端具备很强的 CSS 功能，但永远不会运行 JavaScript，所以这种情况可能是一个有趣的渐进增强。")]),t._v(" "),s("p",[t._v("让我们看看制作一个 CSS 计时器需要什么。我们将使用一些现代 CSS 技术来完成它。需要哪些方法呢？")]),t._v(" "),s("ol",[s("li",[t._v("css 计数器")]),t._v(" "),s("li",[t._v("@property")]),t._v(" "),s("li",[t._v("伪元素")]),t._v(" "),s("li",[t._v("@keyframes 关键帧")]),t._v(" "),s("li",[t._v("通过 css 添加一些视觉效果")])]),t._v(" "),s("p",[t._v("我们的 CSS 计时器有三个主要要求：")]),t._v(" "),s("ul",[s("li",[t._v("一个可以从 5 递减到 0 的数字")]),t._v(" "),s("li",[t._v("一种计时五秒并在每个秒内递减数字的方法")]),t._v(" "),s("li",[t._v("一种在页面上显示递减数字的方法")])]),t._v(" "),s("h3",{attrs:{id:"css-的-property-定义数值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#css-的-property-定义数值"}},[t._v("#")]),t._v(" css 的@property 定义数值")]),t._v(" "),s("p",[t._v("对于我们的第一个要求，可更新的数字，我们将使用 @property 创建一个自定义属性，该属性将保存类型为 "),s("strong",[t._v("integer")]),t._v(" 的值。")]),t._v(" "),s("p",[t._v("注意：整数可以是零，也可以是正整数或负整数。如果您想要带小数点的数字，请使用 "),s("strong",[t._v("number")]),t._v("，它保存的是实数。")]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token atrule"}},[s("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@property")]),t._v(" --n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("syntax")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<integer>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("inherits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("initial-value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h3",{attrs:{id:"计数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#计数"}},[t._v("#")]),t._v(" 计数")]),t._v(" "),s("p",[t._v("为了跟踪秒数，在减少数字的同时，我们需要使用 ￼@keyframes￼ 动画。")]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token atrule"}},[s("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@keyframes")]),t._v(" count")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("--n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("to")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("--n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("动画功能通过 ￼animation￼ 属性来实现。")]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".timer:hover::after")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("animation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5s linear count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("当我们为特定值类型（例如 "),s("strong",[t._v("integer")]),t._v("、"),s("strong",[t._v("percentage")]),t._v(" 或 "),s("strong",[t._v("color")]),t._v("）注册自定义属性时，浏览器就知道该属性是为与该特定类型的值配合使用的。")]),t._v(" "),s("p",[t._v("有了这些知识，浏览器就可以自信地在将来更新自定义属性的值，甚至在动画过程中也是如此。")]),t._v(" "),s("p",[t._v("这就是为什么我们的属性 --n 可以在动画中从 5 变为 0，而且由于动画设置为五秒，所以这实际上是在五秒内从五数到零。因此，计时器诞生了。")]),t._v(" "),s("p",[t._v("但仍然需要将计数的数字打印到页面上。如果您之前没有注意到，我已经将动画分配给了一个伪元素，这应该会为您提供下一步的线索 "),s("strong",[t._v("content")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"显示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#显示"}},[t._v("#")]),t._v(" 显示")]),t._v(" "),s("p",[t._v("属性 content 可以显示我们自己尚未添加到 HTML 的内容。我们通常将此属性用于各种事物，因为它接受各种值 — 图像、字符串、计数器、引号，甚至属性值。但是，它不直接接受数字。因此，我们将通过 counter 向其输入数字 --n。")]),t._v(" "),s("p",[t._v("可以使用 counter-reset 或 counter-increment 设置计数器。我们将使用 counter-reset。此属性的值是计数器名称和整数。由于 counter-reset 尚未正确处理整数的 CSS 变量或自定义属性，但接受 calc()，因此 calc() 函数成为我们的武器，我们将在其中发送 –n。")]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".timer:hover::after")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("animation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5s linear count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("animation-fill-mode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" forwards"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("counter-reset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0 + "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("var")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("--n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("counter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("即：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("我们的动画数字 --n 首先被输入到 calc()")])]),t._v(" "),s("li",[s("p",[t._v("calc() 随后被输入到 counter()")])]),t._v(" "),s("li",[s("p",[t._v("counter()函数 又被输入到内容，最终在页面上呈现 --n。")])])]),t._v(" "),s("p",[t._v("其余部分由浏览器处理。它知道 --n 是一个整数。浏览器跟上动画，在五秒内将此整数从 5 更改为 0。然后，由于整数用于内容值，浏览器会在页面更新时显示该整数。\n在动画结束时，animation-fill-mode：forwards; 样式规则可防止计时器立即恢复到初始 --n 值零。")]),t._v(" "),s("p",[t._v("这是最终的演示效果:\n"),s("img",{attrs:{src:"https://raw.githubusercontent.com/AprilTong/image/master/timer.gif",alt:"演示效果"}})]),t._v(" "),s("h3",{attrs:{id:"相关文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关文章"}},[t._v("#")]),t._v(" 相关文章")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://frontendmasters.com/blog/how-to-make-a-css-timer/",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/@property",target:"_blank",rel:"noopener noreferrer"}},[t._v("@property mdn"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/counter",target:"_blank",rel:"noopener noreferrer"}},[t._v("counter mdn"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/@keyframes",target:"_blank",rel:"noopener noreferrer"}},[t._v("@keyframes mdn"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);