(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{501:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"如何修改第三方依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何修改第三方依赖"}},[s._v("#")]),s._v(" 如何修改第三方依赖")]),s._v(" "),a("p",[s._v("在日常开发中，遇到依赖包中有 bug 时，要怎么解决呢？\n我之前做法:")]),s._v(" "),a("ol",[a("li",[s._v("升级依赖库版本: 有可能最新版本也没解决，有可能最新版本不稳定；")]),s._v(" "),a("li",[s._v("提 issue 等待官方修复并发布：很有可能很漫长；")]),s._v(" "),a("li",[s._v("尝试查找同等替代库: 在刚选择的时候可以，但如果是组件库等使用很久了，替换一个新的库成本也太大了;")])]),s._v(" "),a("h2",{attrs:{id:"patch-package"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#patch-package"}},[s._v("#")]),s._v(" patch-package")]),s._v(" "),a("p",[s._v("不再需要等待合并和发布拉取请求。不再需要等待存储库来修复您的应用程序运行的一个小问题。对其他 npm 包打补丁，既安全又便捷。")]),s._v(" "),a("h2",{attrs:{id:"包管理器使用-npm-yarn-类似"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#包管理器使用-npm-yarn-类似"}},[s._v("#")]),s._v(" 包管理器使用 npm (yarn 类似)")]),s._v(" "),a("p",[s._v("以 lodash-es 库举例")]),s._v(" "),a("ol",[a("li",[s._v("安装依赖")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" patch-package postinstall-postinstall "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("修改 node_modules/lodash-es/cloneDeep.js")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cloneDeep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 添加修改")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("baseClone")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CLONE_DEEP_FLAG")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CLONE_SYMBOLS_FLAG")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" cloneDeep\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("生成修改文件")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("npx patch-package lodash-es\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("执行完之后，在项目目录下会有 patches 文件夹，包含对应的修改文件")]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("修改 package.json 文件")])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"postinstall"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"patch-package"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"包管理器使用-pnpm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#包管理器使用-pnpm"}},[s._v("#")]),s._v(" 包管理器使用 pnpm")]),s._v(" "),a("ol",[a("li",[s._v("生成修改依赖包的临时路径")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pnpm patch element-plus\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("进入临时路径目录，对包进行修改")]),s._v(" "),a("li",[s._v("生成修改文件, xxx 是临时路径")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" patch-commit xxx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("执行完之后，在项目目录下会有 patches 文件夹，包含对应的修改文件\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/AprilTong/image/master/20230809172222.png",alt:"结果"}})]),s._v(" "),a("p",[s._v("同时在 package.json 中多了一个配置项。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/AprilTong/image/master/20230809172350.png",alt:""}})])])}),[],!1,null,null,null);a.default=e.exports}}]);